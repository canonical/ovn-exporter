#!/bin/bash
set -e

# Set OVN database locations when ovn-central-data interface is connected
snapctl set "ovn-nbdb-location"="$SNAP_COMMON/data/central/db/ovnnb_db.db"
snapctl set "ovn-sbdb-location"="$SNAP_COMMON/data/central/db/ovnsb_db.db"
echo "Set OVN database locations in $SNAP_COMMON/data/central/db/"

# Explicit restart to ensure service picks up configuration
# This is queued and will execute after this hook and the configure hook complete
snapctl restart ovn-exporter.ovn-exporter 2>/dev/null || echo "Service restart scheduled"
